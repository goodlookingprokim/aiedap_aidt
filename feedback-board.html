<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì‹œê°„ í”¼ë“œë°± ë³´ë“œ - HTHTÃ—SEL í”„ë¡œì íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-label {
            font-weight: 600;
            color: #2c3e50;
        }

        .control-input {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #e67e22, #d35400);
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(243, 156, 18, 0.3);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #229954, #1e8449);
            transform: translateY(-2px);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            min-height: 600px;
        }

        .feedback-area {
            padding: 40px;
            display: flex;
            flex-direction: column;
        }

        .feedback-input-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .input-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-icon {
            width: 32px;
            height: 32px;
            background: #f39c12;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .feedback-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #f39c12;
            box-shadow: 0 0 0 3px rgba(243, 156, 18, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .feedback-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .type-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .type-option:hover {
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .type-option.selected {
            border-color: #f39c12;
            background: #fef9e7;
        }

        .type-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .type-label {
            font-weight: 600;
            color: #2c3e50;
        }

        .feedback-list {
            flex-grow: 1;
            max-height: 400px;
            overflow-y: auto;
        }

        .feedback-item {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .feedback-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-author {
            font-weight: 600;
            color: #2c3e50;
        }

        .feedback-time {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .feedback-type-badge {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }

        .type-positive {
            background: #27ae60;
        }

        .type-constructive {
            background: #f39c12;
        }

        .type-question {
            background: #3498db;
        }

        .type-suggestion {
            background: #9b59b6;
        }

        .feedback-target {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .feedback-content {
            color: #2c3e50;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .feedback-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 5px 12px;
            border: none;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .like-btn {
            background: #ecf0f1;
            color: #7f8c8d;
        }

        .like-btn.liked {
            background: #e74c3c;
            color: white;
        }

        .reply-btn {
            background: #3498db;
            color: white;
        }

        .reply-btn:hover {
            background: #2980b9;
        }

        .sidebar {
            background: #f8f9fa;
            border-left: 1px solid #dee2e6;
            padding: 30px;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-icon {
            width: 24px;
            height: 24px;
            background: #f39c12;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f39c12;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .team-list {
            list-style: none;
        }

        .team-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .team-item:hover {
            background: white;
        }

        .team-item.selected {
            background: #fef9e7;
            border: 1px solid #f39c12;
        }

        .team-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f39c12;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .team-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-btn {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .filter-btn:hover {
            border-color: #f39c12;
        }

        .filter-btn.active {
            background: #f39c12;
            color: white;
            border-color: #f39c12;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }

        .close-btn:hover {
            color: #e74c3c;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                border-left: none;
                border-top: 1px solid #dee2e6;
            }
            
            .feedback-form {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .control-group {
                justify-content: space-between;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #27ae60;
        }

        .notification.error {
            background: #e74c3c;
        }

        .notification.info {
            background: #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ì‹¤ì‹œê°„ í”¼ë“œë°± ë³´ë“œ</h1>
            <p>ëª¨ë‘ ë³„ í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì‹¤ì‹œê°„ í”¼ë“œë°±ì„ ì£¼ê³ ë°›ìœ¼ë©° í•¨ê»˜ ì„±ì¥í•˜ì„¸ìš”</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <span class="control-label">ì°¸ì—¬ì ì´ë¦„:</span>
                <input type="text" class="control-input" id="userName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="control-group">
                <span class="control-label">í˜„ì¬ ëª¨ë‘ :</span>
                <select class="control-input" id="currentTeam">
                    <option value="">ëª¨ë‘  ì„ íƒ</option>
                    <option value="team1">1ëª¨ë‘  - AI ì±—ë´‡íŒ€</option>
                    <option value="team2">2ëª¨ë‘  - ë°ì´í„° ë¶„ì„íŒ€</option>
                    <option value="team3">3ëª¨ë‘  - ê°ì • ì¸ì‹íŒ€</option>
                    <option value="team4">4ëª¨ë‘  - ì†Œí†µ ê°œì„ íŒ€</option>
                    <option value="team5">5ëª¨ë‘  - í•™ìŠµ ë„ìš°ë¯¸íŒ€</option>
                </select>
            </div>
            <div class="control-group">
                <button class="btn btn-secondary" onclick="clearAll()">ì „ì²´ ì´ˆê¸°í™”</button>
                <button class="btn btn-success" onclick="exportFeedback()">í”¼ë“œë°± ë‚´ë³´ë‚´ê¸°</button>
            </div>
        </div>

        <div class="main-content">
            <div class="feedback-area">
                <div class="feedback-input-section">
                    <div class="input-title">
                        <div class="input-icon">âœï¸</div>
                        í”¼ë“œë°± ì‘ì„±í•˜ê¸°
                    </div>

                    <div class="feedback-type-selector">
                        <div class="type-option selected" onclick="selectFeedbackType(this, 'positive')">
                            <span class="type-icon">ğŸ‘</span>
                            <div class="type-label">ì¹­ì°¬</div>
                        </div>
                        <div class="type-option" onclick="selectFeedbackType(this, 'constructive')">
                            <span class="type-icon">ğŸ’¡</span>
                            <div class="type-label">ê°œì„  ì œì•ˆ</div>
                        </div>
                        <div class="type-option" onclick="selectFeedbackType(this, 'question')">
                            <span class="type-icon">â“</span>
                            <div class="type-label">ì§ˆë¬¸</div>
                        </div>
                        <div class="type-option" onclick="selectFeedbackType(this, 'suggestion')">
                            <span class="type-icon">ğŸ’­</span>
                            <div class="type-label">ì•„ì´ë””ì–´</div>
                        </div>
                    </div>

                    <div class="feedback-form">
                        <div class="form-group">
                            <label class="form-label">ëŒ€ìƒ ëª¨ë‘ </label>
                            <select class="form-select" id="targetTeam">
                                <option value="">ëª¨ë‘  ì„ íƒ</option>
                                <option value="team1">1ëª¨ë‘  - AI ì±—ë´‡íŒ€</option>
                                <option value="team2">2ëª¨ë‘  - ë°ì´í„° ë¶„ì„íŒ€</option>
                                <option value="team3">3ëª¨ë‘  - ê°ì • ì¸ì‹íŒ€</option>
                                <option value="team4">4ëª¨ë‘  - ì†Œí†µ ê°œì„ íŒ€</option>
                                <option value="team5">5ëª¨ë‘  - í•™ìŠµ ë„ìš°ë¯¸íŒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">SEL ì—­ëŸ‰ ì—°ê³„</label>
                            <select class="form-select" id="selCompetency">
                                <option value="">ì—­ëŸ‰ ì„ íƒ (ì„ íƒì‚¬í•­)</option>
                                <option value="self-awareness">âœª ìê¸°ì¸ì‹</option>
                                <option value="self-management">â™¢ ìê¸°ê´€ë¦¬</option>
                                <option value="social-awareness">â™§ ì‚¬íšŒì  ì¸ì‹</option>
                                <option value="relationship-skills">â™¤ ê´€ê³„ ê¸°ìˆ </option>
                                <option value="responsible-decision">â˜… ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">í”¼ë“œë°± ë‚´ìš©</label>
                        <textarea class="form-textarea" id="feedbackContent" placeholder="êµ¬ì²´ì ì´ê³  ê±´ì„¤ì ì¸ í”¼ë“œë°±ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..."></textarea>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="submitFeedback()">í”¼ë“œë°± ë“±ë¡</button>
                    </div>
                </div>

                <div class="feedback-list" id="feedbackList">
                    <!-- í”¼ë“œë°± í•­ëª©ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <div class="sidebar">
                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <div class="sidebar-icon">ğŸ“Š</div>
                        í”¼ë“œë°± í†µê³„
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number" id="totalFeedbacks">0</div>
                            <div class="stat-label">ì „ì²´ í”¼ë“œë°±</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="positiveFeedbacks">0</div>
                            <div class="stat-label">ì¹­ì°¬</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="constructiveFeedbacks">0</div>
                            <div class="stat-label">ê°œì„  ì œì•ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="questionFeedbacks">0</div>
                            <div class="stat-label">ì§ˆë¬¸</div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <div class="sidebar-icon">ğŸ‘¥</div>
                        ëª¨ë‘  ëª©ë¡
                    </div>
                    <ul class="team-list">
                        <li class="team-item" onclick="filterByTeam('all')">
                            <div class="team-avatar">ì „ì²´</div>
                            <div class="team-name">ëª¨ë“  ëª¨ë‘ </div>
                        </li>
                        <li class="team-item" onclick="filterByTeam('team1')">
                            <div class="team-avatar">1</div>
                            <div class="team-name">AI ì±—ë´‡íŒ€</div>
                        </li>
                        <li class="team-item" onclick="filterByTeam('team2')">
                            <div class="team-avatar">2</div>
                            <div class="team-name">ë°ì´í„° ë¶„ì„íŒ€</div>
                        </li>
                        <li class="team-item" onclick="filterByTeam('team3')">
                            <div class="team-avatar">3</div>
                            <div class="team-name">ê°ì • ì¸ì‹íŒ€</div>
                        </li>
                        <li class="team-item" onclick="filterByTeam('team4')">
                            <div class="team-avatar">4</div>
                            <div class="team-name">ì†Œí†µ ê°œì„ íŒ€</div>
                        </li>
                        <li class="team-item" onclick="filterByTeam('team5')">
                            <div class="team-avatar">5</div>
                            <div class="team-name">í•™ìŠµ ë„ìš°ë¯¸íŒ€</div>
                        </li>
                    </ul>
                </div>

                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <div class="sidebar-icon">ğŸ”</div>
                        í•„í„°
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterByType('all')">ì „ì²´ ë³´ê¸°</button>
                        <button class="filter-btn" onclick="filterByType('positive')">ğŸ‘ ì¹­ì°¬ë§Œ</button>
                        <button class="filter-btn" onclick="filterByType('constructive')">ğŸ’¡ ê°œì„  ì œì•ˆë§Œ</button>
                        <button class="filter-btn" onclick="filterByType('question')">â“ ì§ˆë¬¸ë§Œ</button>
                        <button class="filter-btn" onclick="filterByType('suggestion')">ğŸ’­ ì•„ì´ë””ì–´ë§Œ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë‹µê¸€ ëª¨ë‹¬ -->
    <div class="modal" id="replyModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: #f39c12;">ë‹µê¸€ ì‘ì„±</h2>
                <p style="color: #7f8c8d;">í”¼ë“œë°±ì— ëŒ€í•œ ë‹µê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”</p>
            </div>
            <div id="originalFeedback" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                <!-- ì›ë³¸ í”¼ë“œë°±ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
            <div class="form-group">
                <label class="form-label">ë‹µê¸€ ë‚´ìš©</label>
                <textarea class="form-textarea" id="replyContent" placeholder="ë‹µê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”..." style="height: 100px;"></textarea>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="submitReply()">ë‹µê¸€ ë“±ë¡</button>
            </div>
        </div>
    </div>

    <!-- ì•Œë¦¼ -->
    <div class="notification" id="notification"></div>

    <script>
        let feedbacks = [];
        let currentFilter = { type: 'all', team: 'all' };
        let selectedFeedbackType = 'positive';
        let replyingToId = null;

        const teamNames = {
            'team1': '1ëª¨ë‘  - AI ì±—ë´‡íŒ€',
            'team2': '2ëª¨ë‘  - ë°ì´í„° ë¶„ì„íŒ€',
            'team3': '3ëª¨ë‘  - ê°ì • ì¸ì‹íŒ€',
            'team4': '4ëª¨ë‘  - ì†Œí†µ ê°œì„ íŒ€',
            'team5': '5ëª¨ë‘  - í•™ìŠµ ë„ìš°ë¯¸íŒ€'
        };

        const selNames = {
            'self-awareness': 'âœª ìê¸°ì¸ì‹',
            'self-management': 'â™¢ ìê¸°ê´€ë¦¬',
            'social-awareness': 'â™§ ì‚¬íšŒì  ì¸ì‹',
            'relationship-skills': 'â™¤ ê´€ê³„ ê¸°ìˆ ',
            'responsible-decision': 'â˜… ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •'
        };

        // í”¼ë“œë°± íƒ€ì… ì„ íƒ
        function selectFeedbackType(element, type) {
            document.querySelectorAll('.type-option').forEach(option => {
                option.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedFeedbackType = type;
        }

        // í”¼ë“œë°± ì œì¶œ
        function submitFeedback() {
            const userName = document.getElementById('userName').value.trim();
            const targetTeam = document.getElementById('targetTeam').value;
            const selCompetency = document.getElementById('selCompetency').value;
            const content = document.getElementById('feedbackContent').value.trim();

            if (!userName) {
                showNotification('ì°¸ì—¬ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            if (!targetTeam) {
                showNotification('ëŒ€ìƒ ëª¨ë‘ ì„ ì„ íƒí•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            if (!content) {
                showNotification('í”¼ë“œë°± ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const feedback = {
                id: Date.now(),
                author: userName,
                targetTeam: targetTeam,
                type: selectedFeedbackType,
                selCompetency: selCompetency,
                content: content,
                timestamp: new Date(),
                likes: 0,
                liked: false,
                replies: []
            };

            feedbacks.unshift(feedback);
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('feedbackContent').value = '';
            document.getElementById('selCompetency').value = '';
            
            renderFeedbacks();
            updateStats();
            saveFeedbacks();
            
            showNotification('í”¼ë“œë°±ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        }

        // í”¼ë“œë°± ë Œë”ë§
        function renderFeedbacks() {
            const feedbackList = document.getElementById('feedbackList');
            const filteredFeedbacks = feedbacks.filter(feedback => {
                const typeMatch = currentFilter.type === 'all' || feedback.type === currentFilter.type;
                const teamMatch = currentFilter.team === 'all' || feedback.targetTeam === currentFilter.team;
                return typeMatch && teamMatch;
            });

            if (filteredFeedbacks.length === 0) {
                feedbackList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ’¬</div>
                        <p>ì•„ì§ í”¼ë“œë°±ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>ì²« ë²ˆì§¸ í”¼ë“œë°±ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }

            feedbackList.innerHTML = filteredFeedbacks.map(feedback => {
                const typeIcons = {
                    'positive': 'ğŸ‘',
                    'constructive': 'ğŸ’¡',
                    'question': 'â“',
                    'suggestion': 'ğŸ’­'
                };

                const typeLabels = {
                    'positive': 'ì¹­ì°¬',
                    'constructive': 'ê°œì„  ì œì•ˆ',
                    'question': 'ì§ˆë¬¸',
                    'suggestion': 'ì•„ì´ë””ì–´'
                };

                const repliesHtml = feedback.replies.map(reply => `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px; border-left: 3px solid #f39c12;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <strong style="color: #2c3e50;">${reply.author}</strong>
                            <span style="font-size: 0.8rem; color: #7f8c8d;">${formatTime(reply.timestamp)}</span>
                        </div>
                        <div style="color: #2c3e50;">${reply.content}</div>
                    </div>
                `).join('');

                return `
                    <div class="feedback-item">
                        <div class="feedback-header">
                            <div>
                                <span class="feedback-author">${feedback.author}</span>
                                <span class="feedback-type-badge type-${feedback.type}">
                                    ${typeIcons[feedback.type]} ${typeLabels[feedback.type]}
                                </span>
                            </div>
                            <span class="feedback-time">${formatTime(feedback.timestamp)}</span>
                        </div>
                        <div class="feedback-target">
                            ğŸ“ ${teamNames[feedback.targetTeam]}
                            ${feedback.selCompetency ? ` â€¢ ${selNames[feedback.selCompetency]}` : ''}
                        </div>
                        <div class="feedback-content">${feedback.content}</div>
                        <div class="feedback-actions">
                            <button class="action-btn like-btn ${feedback.liked ? 'liked' : ''}" onclick="toggleLike(${feedback.id})">
                                â¤ï¸ ${feedback.likes}
                            </button>
                            <button class="action-btn reply-btn" onclick="openReplyModal(${feedback.id})">
                                ğŸ’¬ ë‹µê¸€
                            </button>
                        </div>
                        ${repliesHtml}
                    </div>
                `;
            }).join('');
        }

        // ì¢‹ì•„ìš” í† ê¸€
        function toggleLike(feedbackId) {
            const feedback = feedbacks.find(f => f.id === feedbackId);
            if (feedback) {
                if (feedback.liked) {
                    feedback.likes--;
                    feedback.liked = false;
                } else {
                    feedback.likes++;
                    feedback.liked = true;
                }
                renderFeedbacks();
                saveFeedbacks();
            }
        }

        // ë‹µê¸€ ëª¨ë‹¬ ì—´ê¸°
        function openReplyModal(feedbackId) {
            const feedback = feedbacks.find(f => f.id === feedbackId);
            if (feedback) {
                replyingToId = feedbackId;
                
                const typeIcons = {
                    'positive': 'ğŸ‘',
                    'constructive': 'ğŸ’¡',
                    'question': 'â“',
                    'suggestion': 'ğŸ’­'
                };

                const typeLabels = {
                    'positive': 'ì¹­ì°¬',
                    'constructive': 'ê°œì„  ì œì•ˆ',
                    'question': 'ì§ˆë¬¸',
                    'suggestion': 'ì•„ì´ë””ì–´'
                };

                document.getElementById('originalFeedback').innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <strong>${feedback.author}</strong>
                        <span class="feedback-type-badge type-${feedback.type}">
                            ${typeIcons[feedback.type]} ${typeLabels[feedback.type]}
                        </span>
                    </div>
                    <div style="color: #7f8c8d; margin-bottom: 10px;">
                        ğŸ“ ${teamNames[feedback.targetTeam]}
                    </div>
                    <div>${feedback.content}</div>
                `;
                
                document.getElementById('replyContent').value = '';
                document.getElementById('replyModal').style.display = 'block';
            }
        }

        // ë‹µê¸€ ì œì¶œ
        function submitReply() {
            const userName = document.getElementById('userName').value.trim();
            const replyContent = document.getElementById('replyContent').value.trim();

            if (!userName) {
                showNotification('ì°¸ì—¬ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            if (!replyContent) {
                showNotification('ë‹µê¸€ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const feedback = feedbacks.find(f => f.id === replyingToId);
            if (feedback) {
                const reply = {
                    id: Date.now(),
                    author: userName,
                    content: replyContent,
                    timestamp: new Date()
                };

                feedback.replies.push(reply);
                renderFeedbacks();
                saveFeedbacks();
                closeModal();
                
                showNotification('ë‹µê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            }
        }

        // íƒ€ì…ë³„ í•„í„°ë§
        function filterByType(type) {
            currentFilter.type = type;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            renderFeedbacks();
        }

        // íŒ€ë³„ í•„í„°ë§
        function filterByTeam(team) {
            currentFilter.team = team;
            
            document.querySelectorAll('.team-item').forEach(item => {
                item.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            renderFeedbacks();
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const total = feedbacks.length;
            const positive = feedbacks.filter(f => f.type === 'positive').length;
            const constructive = feedbacks.filter(f => f.type === 'constructive').length;
            const question = feedbacks.filter(f => f.type === 'question').length;

            document.getElementById('totalFeedbacks').textContent = total;
            document.getElementById('positiveFeedbacks').textContent = positive;
            document.getElementById('constructiveFeedbacks').textContent = constructive;
            document.getElementById('questionFeedbacks').textContent = question;
        }

        // ì‹œê°„ í¬ë§·íŒ…
        function formatTime(timestamp) {
            const now = new Date();
            const time = new Date(timestamp);
            const diff = now - time;
            
            if (diff < 60000) { // 1ë¶„ ë¯¸ë§Œ
                return 'ë°©ê¸ˆ ì „';
            } else if (diff < 3600000) { // 1ì‹œê°„ ë¯¸ë§Œ
                return Math.floor(diff / 60000) + 'ë¶„ ì „';
            } else if (diff < 86400000) { // 1ì¼ ë¯¸ë§Œ
                return Math.floor(diff / 3600000) + 'ì‹œê°„ ì „';
            } else {
                return time.toLocaleDateString('ko-KR');
            }
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ì „ì²´ ì´ˆê¸°í™”
        function clearAll() {
            if (confirm('ëª¨ë“  í”¼ë“œë°±ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                feedbacks = [];
                renderFeedbacks();
                updateStats();
                saveFeedbacks();
                showNotification('ëª¨ë“  í”¼ë“œë°±ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            }
        }

        // í”¼ë“œë°± ë‚´ë³´ë‚´ê¸°
        function exportFeedback() {
            if (feedbacks.length === 0) {
                showNotification('ë‚´ë³´ë‚¼ í”¼ë“œë°±ì´ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }

            let content = 'HTHTÃ—SEL í”„ë¡œì íŠ¸ - ì‹¤ì‹œê°„ í”¼ë“œë°± ë³´ë“œ\n';
            content += '=' + '='.repeat(50) + '\n\n';

            const typeLabels = {
                'positive': 'ì¹­ì°¬',
                'constructive': 'ê°œì„  ì œì•ˆ',
                'question': 'ì§ˆë¬¸',
                'suggestion': 'ì•„ì´ë””ì–´'
            };

            feedbacks.forEach((feedback, index) => {
                content += `${index + 1}. [${typeLabels[feedback.type]}] ${feedback.author} â†’ ${teamNames[feedback.targetTeam]}\n`;
                content += `ì‹œê°„: ${feedback.timestamp.toLocaleString('ko-KR')}\n`;
                if (feedback.selCompetency) {
                    content += `SEL ì—­ëŸ‰: ${selNames[feedback.selCompetency]}\n`;
                }
                content += `ë‚´ìš©: ${feedback.content}\n`;
                content += `ì¢‹ì•„ìš”: ${feedback.likes}ê°œ\n`;
                
                if (feedback.replies.length > 0) {
                    content += `ë‹µê¸€ (${feedback.replies.length}ê°œ):\n`;
                    feedback.replies.forEach((reply, replyIndex) => {
                        content += `  ${replyIndex + 1}) ${reply.author}: ${reply.content}\n`;
                    });
                }
                content += '\n' + '-'.repeat(50) + '\n\n';
            });

            content += `\nì´ í”¼ë“œë°± ìˆ˜: ${feedbacks.length}ê°œ\n`;
            content += `ë‚´ë³´ë‚´ê¸° ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}\n`;

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'í”¼ë“œë°±ë³´ë“œ_' + new Date().toISOString().slice(0,10) + '.txt';
            a.click();
            URL.revokeObjectURL(url);

            showNotification('í”¼ë“œë°±ì´ ë‚´ë³´ë‚´ê¸° ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        }

        // í”¼ë“œë°± ì €ì¥
        function saveFeedbacks() {
            localStorage.setItem('feedbackBoardData', JSON.stringify(feedbacks));
        }

        // í”¼ë“œë°± ë¶ˆëŸ¬ì˜¤ê¸°
        function loadFeedbacks() {
            const saved = localStorage.getItem('feedbackBoardData');
            if (saved) {
                feedbacks = JSON.parse(saved).map(feedback => ({
                    ...feedback,
                    timestamp: new Date(feedback.timestamp),
                    replies: feedback.replies.map(reply => ({
                        ...reply,
                        timestamp: new Date(reply.timestamp)
                    }))
                }));
                renderFeedbacks();
                updateStats();
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
            replyingToId = null;
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadFeedbacks();
            
            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeModal();
                    }
                });
            });

            // ìƒ˜í”Œ ë°ì´í„° ì¶”ê°€ (ì²˜ìŒ ì‚¬ìš©ì‹œ)
            if (feedbacks.length === 0) {
                const sampleFeedbacks = [
                    {
                        id: Date.now() - 1000,
                        author: 'ê¹€ì„ ìƒ',
                        targetTeam: 'team1',
                        type: 'positive',
                        selCompetency: 'relationship-skills',
                        content: '1ëª¨ë‘ ì˜ AI ì±—ë´‡ ì•„ì´ë””ì–´ê°€ ì •ë§ ì°½ì˜ì ì´ë„¤ìš”! íŠ¹íˆ ê°ì •ì„ ì¸ì‹í•˜ëŠ” ê¸°ëŠ¥ì´ ì¸ìƒì ì…ë‹ˆë‹¤.',
                        timestamp: new Date(Date.now() - 3600000),
                        likes: 3,
                        liked: false,
                        replies: []
                    },
                    {
                        id: Date.now() - 2000,
                        author: 'ì´í•™ìƒ',
                        targetTeam: 'team2',
                        type: 'question',
                        selCompetency: 'self-awareness',
                        content: '2ëª¨ë‘ ì˜ ë°ì´í„° ë¶„ì„ ê²°ê³¼ê°€ í¥ë¯¸ë¡œìš´ë°, ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì…¨ë‚˜ìš”?',
                        timestamp: new Date(Date.now() - 7200000),
                        likes: 1,
                        liked: false,
                        replies: [
                            {
                                id: Date.now() - 1500,
                                author: 'ë°•í•™ìƒ',
                                content: 'ì„¤ë¬¸ì¡°ì‚¬ì™€ í•™ìŠµ ë¡œê·¸ ë°ì´í„°ë¥¼ í™œìš©í–ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë°œí‘œì—ì„œ ì„¤ëª…ë“œë¦´ê²Œìš”!',
                                timestamp: new Date(Date.now() - 3000000)
                            }
                        ]
                    }
                ];
                
                feedbacks = sampleFeedbacks;
                renderFeedbacks();
                updateStats();
                saveFeedbacks();
            }
        });
    </script>
</body>
</html>

