<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEL ì—­ëŸ‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ - HTHTÃ—SEL í”„ë¡œì íŠ¸</title>
    <meta name="description" content="5ëŒ€ SEL ì—­ëŸ‰ì˜ ê· í˜•ì  ë°œë‹¬ì„ ì ê²€í•˜ê³  ê°œì„  ë°©ì•ˆì„ ì°¾ëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ ë„êµ¬">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="common.css">
    
    <style>
        .main-content {
            padding: var(--spacing-xl) 0;
            min-height: calc(100vh - 200px);
        }

        .page-header {
            text-align: center;
            margin-bottom: var(--spacing-2xl);
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .page-subtitle {
            font-size: 1.125rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto var(--spacing-lg);
            line-height: 1.6;
        }

        /* ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .dashboard-card {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
        }

        .dashboard-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .dashboard-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-gradient);
            color: var(--text-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto var(--spacing-md);
        }

        .dashboard-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
            margin-bottom: var(--spacing-xs);
        }

        .dashboard-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* SEL ì—­ëŸ‰ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .competency-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            margin-bottom: var(--spacing-xl);
            overflow: hidden;
        }

        .competency-header {
            background: var(--bg-gradient);
            color: var(--text-white);
            padding: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .competency-header:hover {
            background: var(--primary-dark);
        }

        .competency-icon {
            font-size: 2rem;
            width: 60px;
            text-align: center;
        }

        .competency-info {
            flex: 1;
        }

        .competency-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .competency-description {
            opacity: 0.9;
            font-size: 1rem;
        }

        .competency-progress {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .progress-bar-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            background: var(--text-white);
            height: 100%;
            transition: width 0.3s ease;
        }

        .progress-percentage {
            font-weight: 600;
            min-width: 50px;
            text-align: right;
        }

        .expand-icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .competency-content {
            padding: var(--spacing-lg);
            display: none;
        }

        .competency-content.expanded {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        .competency-section.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* ì²´í¬ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .checklist {
            display: grid;
            gap: var(--spacing-md);
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
        }

        .checklist-item:hover {
            background: var(--bg-tertiary);
        }

        .checklist-item.checked {
            background: rgba(72, 187, 120, 0.1);
            border-left: 4px solid var(--success-color);
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--bg-tertiary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-fast);
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checkbox:hover {
            border-color: var(--primary-color);
        }

        .checkbox.checked {
            background: var(--success-color);
            border-color: var(--success-color);
            color: var(--text-white);
        }

        .checklist-text {
            flex: 1;
            line-height: 1.6;
            color: var(--text-primary);
        }

        .checklist-item.checked .checklist-text {
            color: var(--text-secondary);
        }

        /* ë¶„ì„ ê²°ê³¼ ìŠ¤íƒ€ì¼ */
        .analysis-section {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
        }

        .analysis-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .radar-chart {
            width: 300px;
            height: 300px;
            margin: 0 auto var(--spacing-lg);
            position: relative;
        }

        .radar-chart svg {
            width: 100%;
            height: 100%;
        }

        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
        }

        .recommendation-card {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            border-left: 4px solid var(--primary-color);
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .recommendation-text {
            color: var(--text-secondary);
            line-height: 1.6;
            font-size: 0.9rem;
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .action-buttons {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            flex-wrap: wrap;
            margin-top: var(--spacing-xl);
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: repeat(2, 1fr);
            }

            .competency-header {
                flex-direction: column;
                text-align: center;
                gap: var(--spacing-sm);
            }

            .competency-progress {
                width: 100%;
            }

            .page-title {
                font-size: 2rem;
            }

            .radar-chart {
                width: 250px;
                height: 250px;
            }

            .recommendations {
                grid-template-columns: 1fr;
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 1000px;
            }
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ì€ common.jsì—ì„œ ìë™ ìƒì„±ë©ë‹ˆë‹¤ -->

    <main class="main-content">
        <div class="container">
            <!-- í˜ì´ì§€ í—¤ë” -->
            <div class="page-header">
                <h1 class="page-title">SEL ì—­ëŸ‰ ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
                <p class="page-subtitle">
                    5ëŒ€ SEL ì—­ëŸ‰ì˜ ê· í˜•ì  ë°œë‹¬ì„ ì ê²€í•˜ê³  ê°œì¸ë³„ ì„±ì¥ ê³„íšì„ ìˆ˜ë¦½í•´ë³´ì„¸ìš”
                </p>
            </div>

            <!-- ëŒ€ì‹œë³´ë“œ -->
            <div class="dashboard">
                <div class="dashboard-card">
                    <div class="dashboard-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <span class="dashboard-number" id="totalItems">0</span>
                    <div class="dashboard-label">ì´ ì²´í¬ í•­ëª©</div>
                </div>
                <div class="dashboard-card">
                    <div class="dashboard-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <span class="dashboard-number" id="completedItems">0</span>
                    <div class="dashboard-label">ì™„ë£Œëœ í•­ëª©</div>
                </div>
                <div class="dashboard-card">
                    <div class="dashboard-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <span class="dashboard-number" id="completionRate">0%</span>
                    <div class="dashboard-label">ì „ì²´ ì™„ì„±ë¥ </div>
                </div>
                <div class="dashboard-card">
                    <div class="dashboard-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <span class="dashboard-number" id="balanceScore">0</span>
                    <div class="dashboard-label">ê· í˜• ì ìˆ˜</div>
                </div>
            </div>

            <!-- SEL ì—­ëŸ‰ ì„¹ì…˜ë“¤ -->
            <div id="competencySections">
                <!-- JavaScriptì—ì„œ ë™ì  ìƒì„± -->
            </div>

            <!-- ë¶„ì„ ê²°ê³¼ ì„¹ì…˜ -->
            <div class="analysis-section">
                <h2 class="analysis-title">ğŸ“Š SEL ì—­ëŸ‰ ë¶„ì„ ê²°ê³¼</h2>
                
                <div class="radar-chart" id="radarChart">
                    <!-- SVG ì°¨íŠ¸ê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>

                <div class="recommendations" id="recommendations">
                    <!-- ì¶”ì²œ ì‚¬í•­ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì•¡ì…˜ ë²„íŠ¼ -->
            <div class="action-buttons">
                <button class="btn btn-secondary" onclick="resetChecklist()">
                    <i class="fas fa-undo"></i>
                    ì´ˆê¸°í™”
                </button>
                <button class="btn btn-outline" onclick="saveProgress()">
                    <i class="fas fa-save"></i>
                    ì§„í–‰ìƒí™© ì €ì¥
                </button>
                <button class="btn btn-outline" onclick="loadProgress()">
                    <i class="fas fa-folder-open"></i>
                    ë¶ˆëŸ¬ì˜¤ê¸°
                </button>
                <button class="btn btn-primary" onclick="exportReport()">
                    <i class="fas fa-file-alt"></i>
                    ë¦¬í¬íŠ¸ ìƒì„±
                </button>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script src="common.js"></script>
    <script>
        class SELCompetencyChecker {
            constructor() {
                this.competencies = {
                    selfAwareness: {
                        icon: 'âœª',
                        title: 'ìê¸°ì¸ì‹',
                        description: 'ìì‹ ì˜ ê°ì •, ìƒê°, ê°€ì¹˜ê´€ì„ ì´í•´í•˜ê³  ì¸ì‹í•˜ëŠ” ëŠ¥ë ¥',
                        items: [
                            'ë‚˜ëŠ” ë‚´ ê°ì •ì„ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‚´ ê°•ì ê³¼ ì•½ì ì„ ì•Œê³  ìˆë‹¤',
                            'ë‚˜ëŠ” ë‚´ ê°€ì¹˜ê´€ì´ ë¬´ì—‡ì¸ì§€ ëª…í™•íˆ ì•ˆë‹¤',
                            'ë‚˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì„ ë•Œ ê·¸ ì›ì¸ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‚´ í–‰ë™ì´ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì•ˆë‹¤',
                            'ë‚˜ëŠ” ë‚´ ëª©í‘œì™€ ê¿ˆì´ ë¬´ì—‡ì¸ì§€ ì•Œê³  ìˆë‹¤',
                            'ë‚˜ëŠ” ë‚´ í•™ìŠµ ìŠ¤íƒ€ì¼ì„ ì´í•´í•˜ê³  ìˆë‹¤',
                            'ë‚˜ëŠ” ì–´ë ¤ìš´ ìƒí™©ì—ì„œ ë‚´ ë°˜ì‘ì„ ê°ê´€ì ìœ¼ë¡œ ê´€ì°°í•  ìˆ˜ ìˆë‹¤'
                        ]
                    },
                    selfManagement: {
                        icon: 'â™¢',
                        title: 'ìê¸°ê´€ë¦¬',
                        description: 'ê°ì •ê³¼ í–‰ë™ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¡°ì ˆí•˜ê³  ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ëŠ¥ë ¥',
                        items: [
                            'ë‚˜ëŠ” í™”ê°€ ë‚  ë•Œ ê°ì •ì„ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ê³„íšì„ ì„¸ìš°ê³  ê·¸ëŒ€ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ìœ í˜¹ì— ë¹ ì§€ì§€ ì•Šê³  ëª©í‘œì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ê±´ê°•í•œ ë°©ë²•ìœ¼ë¡œ í•´ì†Œí•œë‹¤',
                            'ë‚˜ëŠ” ì‹¤íŒ¨í–ˆì„ ë•Œ ë‹¤ì‹œ ì¼ì–´ì„¤ ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ì‹œê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤',
                            'ë‚˜ëŠ” ì¶©ë™ì ì¸ í–‰ë™ì„ ìì œí•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ì–´ë ¤ìš´ ê³¼ì œë„ ëê¹Œì§€ ì™„ìˆ˜í•œë‹¤'
                        ]
                    },
                    socialAwareness: {
                        icon: 'â™§',
                        title: 'ì‚¬íšŒì  ì¸ì‹',
                        description: 'ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ê³¼ ê´€ì ì„ ì´í•´í•˜ê³  ê³µê°í•˜ëŠ” ëŠ¥ë ¥',
                        items: [
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì˜ íŒŒì•…í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ì…ì¥ì—ì„œ ìƒê°í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë¹„ì–¸ì–´ì  ì‹ í˜¸(í‘œì •, ëª¸ì§“)ë¥¼ ì˜ ì½ëŠ”ë‹¤',
                            'ë‚˜ëŠ” ë‹¤ì–‘í•œ ë¬¸í™”ì™€ ë°°ê²½ì„ ê°€ì§„ ì‚¬ëŒë“¤ì„ ì¡´ì¤‘í•œë‹¤',
                            'ë‚˜ëŠ” ì§‘ë‹¨ ë‚´ ë¶„ìœ„ê¸°ë¥¼ ì˜ íŒŒì•…í•œë‹¤',
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì´ ë„ì›€ì´ í•„ìš”í•  ë•Œ ì•Œì•„ì°¨ë¦°ë‹¤',
                            'ë‚˜ëŠ” ì‚¬íšŒì  ê·œë²”ê³¼ ê¸°ëŒ€ë¥¼ ì´í•´í•œë‹¤',
                            'ë‚˜ëŠ” ë¶ˆê³µì •í•œ ìƒí™©ì„ ì¸ì‹í•˜ê³  ëŒ€ì‘í•  ìˆ˜ ìˆë‹¤'
                        ]
                    },
                    relationshipSkills: {
                        icon: 'â™¤',
                        title: 'ê´€ê³„ ê¸°ìˆ ',
                        description: 'ê±´ê°•í•œ ê´€ê³„ë¥¼ í˜•ì„±í•˜ê³  ìœ ì§€í•˜ë©° ê°ˆë“±ì„ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥',
                        items: [
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒê³¼ ì‰½ê²Œ ëŒ€í™”ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” íŒ€ì›Œí¬ë¥¼ ë°œíœ˜í•˜ì—¬ í˜‘ë ¥í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ê°ˆë“± ìƒí™©ì„ í‰í™”ë¡­ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ì˜ê²¬ì„ ê²½ì²­í•œë‹¤',
                            'ë‚˜ëŠ” ë„ì›€ì´ í•„ìš”í•  ë•Œ ìš”ì²­í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë„ì›€ì„ ì œê³µí•œë‹¤',
                            'ë‚˜ëŠ” ê±´ì„¤ì ì¸ í”¼ë“œë°±ì„ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ê³¼ ì¹œë°€í•œ ê´€ê³„ë¥¼ ë§ºëŠ”ë‹¤'
                        ]
                    },
                    responsibleDecision: {
                        icon: 'â˜…',
                        title: 'ì±…ì„ ìˆëŠ” ì˜ì‚¬ê²°ì •',
                        description: 'ìœ¤ë¦¬ì ì´ê³  ê±´ì„¤ì ì¸ ì„ íƒì„ í•˜ë©° ê·¸ ê²°ê³¼ì— ì±…ì„ì§€ëŠ” ëŠ¥ë ¥',
                        items: [
                            'ë‚˜ëŠ” ê²°ì •ì„ ë‚´ë¦¬ê¸° ì „ì— ì¶©ë¶„íˆ ìƒê°í•œë‹¤',
                            'ë‚˜ëŠ” ë‚´ í–‰ë™ì˜ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ì˜³ê³  ê·¸ë¦„ì„ êµ¬ë³„í•  ìˆ˜ ìˆë‹¤',
                            'ë‚˜ëŠ” ì–´ë ¤ìš´ ìƒí™©ì—ì„œë„ ì˜¬ë°”ë¥¸ ì„ íƒì„ í•œë‹¤',
                            'ë‚˜ëŠ” ë‚´ ê²°ì •ì— ëŒ€í•´ ì±…ì„ì„ ì§„ë‹¤',
                            'ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ë³µì§€ë¥¼ ê³ ë ¤í•˜ì—¬ ê²°ì •í•œë‹¤',
                            'ë‚˜ëŠ” ì¥ê¸°ì  ê´€ì ì—ì„œ íŒë‹¨í•œë‹¤',
                            'ë‚˜ëŠ” ì‹¤ìˆ˜ë¥¼ ì¸ì •í•˜ê³  ê°œì„ í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤'
                        ]
                    }
                };

                this.checkedItems = {};
                this.init();
            }

            init() {
                this.loadFromStorage();
                this.createCompetencySections();
                this.updateDashboard();
                this.updateAnalysis();
                this.bindEvents();
            }

            createCompetencySections() {
                const container = document.getElementById('competencySections');
                container.innerHTML = '';

                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const section = document.createElement('div');
                    section.className = 'competency-section';
                    section.innerHTML = `
                        <div class="competency-header" onclick="toggleSection('${key}')">
                            <div class="competency-icon">${competency.icon}</div>
                            <div class="competency-info">
                                <div class="competency-title">${competency.title}</div>
                                <div class="competency-description">${competency.description}</div>
                            </div>
                            <div class="competency-progress">
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill" id="progress-${key}"></div>
                                </div>
                                <div class="progress-percentage" id="percentage-${key}">0%</div>
                            </div>
                            <div class="expand-icon">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                        <div class="competency-content" id="content-${key}">
                            <div class="checklist">
                                ${competency.items.map((item, index) => `
                                    <div class="checklist-item" id="item-${key}-${index}">
                                        <div class="checkbox" onclick="toggleItem('${key}', ${index})">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="checklist-text">${item}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    container.appendChild(section);
                });

                this.updateCheckboxes();
            }

            updateCheckboxes() {
                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    competency.items.forEach((item, index) => {
                        const itemElement = document.getElementById(`item-${key}-${index}`);
                        const checkbox = itemElement.querySelector('.checkbox');
                        const checkIcon = checkbox.querySelector('i');
                        
                        if (this.checkedItems[`${key}-${index}`]) {
                            itemElement.classList.add('checked');
                            checkbox.classList.add('checked');
                            checkIcon.style.display = 'block';
                        } else {
                            itemElement.classList.remove('checked');
                            checkbox.classList.remove('checked');
                            checkIcon.style.display = 'none';
                        }
                    });
                });
            }

            toggleItem(competencyKey, itemIndex) {
                const itemId = `${competencyKey}-${itemIndex}`;
                this.checkedItems[itemId] = !this.checkedItems[itemId];
                
                this.updateCheckboxes();
                this.updateDashboard();
                this.updateAnalysis();
                this.autoSave();
            }

            updateDashboard() {
                const totalItems = Object.keys(this.competencies).reduce((sum, key) => 
                    sum + this.competencies[key].items.length, 0);
                
                const completedItems = Object.values(this.checkedItems).filter(Boolean).length;
                const completionRate = Math.round((completedItems / totalItems) * 100);
                
                // ê° ì—­ëŸ‰ë³„ ì§„í–‰ë¥  ê³„ì‚°
                const competencyScores = {};
                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const checkedCount = competency.items.filter((item, index) => 
                        this.checkedItems[`${key}-${index}`]).length;
                    const score = Math.round((checkedCount / competency.items.length) * 100);
                    competencyScores[key] = score;
                    
                    // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
                    const progressBar = document.getElementById(`progress-${key}`);
                    const percentage = document.getElementById(`percentage-${key}`);
                    if (progressBar && percentage) {
                        progressBar.style.width = score + '%';
                        percentage.textContent = score + '%';
                    }
                });

                // ê· í˜• ì ìˆ˜ ê³„ì‚° (í‘œì¤€í¸ì°¨ ê¸°ë°˜)
                const scores = Object.values(competencyScores);
                const mean = scores.reduce((a, b) => a + b, 0) / scores.length;
                const variance = scores.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / scores.length;
                const standardDeviation = Math.sqrt(variance);
                const balanceScore = Math.max(0, Math.round(100 - standardDeviation));

                // ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
                document.getElementById('totalItems').textContent = totalItems;
                document.getElementById('completedItems').textContent = completedItems;
                document.getElementById('completionRate').textContent = completionRate + '%';
                document.getElementById('balanceScore').textContent = balanceScore;
            }

            updateAnalysis() {
                this.createRadarChart();
                this.generateRecommendations();
            }

            createRadarChart() {
                const container = document.getElementById('radarChart');
                const size = 300;
                const center = size / 2;
                const radius = 100;

                // ê° ì—­ëŸ‰ë³„ ì ìˆ˜ ê³„ì‚°
                const scores = {};
                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const checkedCount = competency.items.filter((item, index) => 
                        this.checkedItems[`${key}-${index}`]).length;
                    scores[key] = (checkedCount / competency.items.length) * 100;
                });

                const competencyKeys = Object.keys(this.competencies);
                const angleStep = (2 * Math.PI) / competencyKeys.length;

                let svg = `
                    <svg viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">
                        <!-- ë°°ê²½ ì›ë“¤ -->
                        <circle cx="${center}" cy="${center}" r="${radius * 0.2}" fill="none" stroke="#e2e8f0" stroke-width="1"/>
                        <circle cx="${center}" cy="${center}" r="${radius * 0.4}" fill="none" stroke="#e2e8f0" stroke-width="1"/>
                        <circle cx="${center}" cy="${center}" r="${radius * 0.6}" fill="none" stroke="#e2e8f0" stroke-width="1"/>
                        <circle cx="${center}" cy="${center}" r="${radius * 0.8}" fill="none" stroke="#e2e8f0" stroke-width="1"/>
                        <circle cx="${center}" cy="${center}" r="${radius}" fill="none" stroke="#e2e8f0" stroke-width="2"/>
                `;

                // ì¶• ê·¸ë¦¬ê¸°
                competencyKeys.forEach((key, index) => {
                    const angle = index * angleStep - Math.PI / 2;
                    const x = center + Math.cos(angle) * radius;
                    const y = center + Math.sin(angle) * radius;
                    
                    svg += `<line x1="${center}" y1="${center}" x2="${x}" y2="${y}" stroke="#cbd5e0" stroke-width="1"/>`;
                    
                    // ë¼ë²¨ ì¶”ê°€
                    const labelX = center + Math.cos(angle) * (radius + 20);
                    const labelY = center + Math.sin(angle) * (radius + 20);
                    const competency = this.competencies[key];
                    
                    svg += `<text x="${labelX}" y="${labelY}" text-anchor="middle" dominant-baseline="middle" 
                            font-size="12" fill="#4a5568" font-weight="600">
                            ${competency.icon} ${competency.title}
                            </text>`;
                });

                // ë°ì´í„° í´ë¦¬ê³¤ ê·¸ë¦¬ê¸°
                let pathData = '';
                competencyKeys.forEach((key, index) => {
                    const angle = index * angleStep - Math.PI / 2;
                    const score = scores[key] || 0;
                    const distance = (score / 100) * radius;
                    const x = center + Math.cos(angle) * distance;
                    const y = center + Math.sin(angle) * distance;
                    
                    if (index === 0) {
                        pathData += `M ${x} ${y}`;
                    } else {
                        pathData += ` L ${x} ${y}`;
                    }
                });
                pathData += ' Z';

                svg += `<path d="${pathData}" fill="rgba(102, 126, 234, 0.3)" stroke="#667eea" stroke-width="2"/>`;

                // ë°ì´í„° í¬ì¸íŠ¸ ê·¸ë¦¬ê¸°
                competencyKeys.forEach((key, index) => {
                    const angle = index * angleStep - Math.PI / 2;
                    const score = scores[key] || 0;
                    const distance = (score / 100) * radius;
                    const x = center + Math.cos(angle) * distance;
                    const y = center + Math.sin(angle) * distance;
                    
                    svg += `<circle cx="${x}" cy="${y}" r="4" fill="#667eea" stroke="#ffffff" stroke-width="2"/>`;
                });

                svg += '</svg>';
                container.innerHTML = svg;
            }

            generateRecommendations() {
                const container = document.getElementById('recommendations');
                const recommendations = [];

                // ê° ì—­ëŸ‰ë³„ ì ìˆ˜ ê³„ì‚°
                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const checkedCount = competency.items.filter((item, index) => 
                        this.checkedItems[`${key}-${index}`]).length;
                    const score = (checkedCount / competency.items.length) * 100;

                    if (score < 50) {
                        recommendations.push({
                            icon: competency.icon,
                            title: `${competency.title} ì—­ëŸ‰ ê°•í™” í•„ìš”`,
                            text: this.getRecommendationText(key, score)
                        });
                    } else if (score >= 80) {
                        recommendations.push({
                            icon: 'ğŸŒŸ',
                            title: `${competency.title} ì—­ëŸ‰ ìš°ìˆ˜`,
                            text: `${competency.title} ì—­ëŸ‰ì´ ì˜ ë°œë‹¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ê°•ì ì„ í™œìš©í•˜ì—¬ ë‹¤ë¥¸ ì—­ëŸ‰ë„ í•¨ê»˜ ë°œì „ì‹œì¼œë³´ì„¸ìš”.`
                        });
                    }
                });

                if (recommendations.length === 0) {
                    recommendations.push({
                        icon: 'ğŸ¯',
                        title: 'ê· í˜•ì¡íŒ ë°œë‹¬',
                        text: 'ëª¨ë“  SEL ì—­ëŸ‰ì´ ê· í˜•ìˆê²Œ ë°œë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì§€ì†ì ì¸ ì„±ì¥ì„ ìœ„í•´ ê¾¸ì¤€íˆ ë…¸ë ¥í•´ì£¼ì„¸ìš”.'
                    });
                }

                container.innerHTML = recommendations.map(rec => `
                    <div class="recommendation-card">
                        <div class="recommendation-title">
                            ${rec.icon} ${rec.title}
                        </div>
                        <div class="recommendation-text">${rec.text}</div>
                    </div>
                `).join('');
            }

            getRecommendationText(competencyKey, score) {
                const texts = {
                    selfAwareness: 'ìê¸° ì„±ì°° ì¼ê¸° ì“°ê¸°, ê°ì • ì¸ì‹ ì—°ìŠµ, ë§ˆìŒì±™ê¹€ ëª…ìƒì„ í†µí•´ ìê¸°ì¸ì‹ ëŠ¥ë ¥ì„ í–¥ìƒì‹œì¼œë³´ì„¸ìš”.',
                    selfManagement: 'ëª©í‘œ ì„¤ì •ê³¼ ê³„íš ìˆ˜ë¦½, ê°ì • ì¡°ì ˆ ê¸°ë²• ì—°ìŠµ, ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ë°©ë²•ì„ ìµí˜€ë³´ì„¸ìš”.',
                    socialAwareness: 'ë‹¤ì–‘í•œ ì‚¬ëŒë“¤ê³¼ ëŒ€í™”í•˜ê¸°, íƒ€ì¸ì˜ ê°ì • ê´€ì°°í•˜ê¸°, ë¬¸í™”ì  ë‹¤ì–‘ì„±ì— ëŒ€í•´ í•™ìŠµí•´ë³´ì„¸ìš”.',
                    relationshipSkills: 'ì ê·¹ì  ê²½ì²­ ì—°ìŠµ, í˜‘ë ¥ í™œë™ ì°¸ì—¬, ê°ˆë“± í•´ê²° ê¸°ë²•ì„ í•™ìŠµí•´ë³´ì„¸ìš”.',
                    responsibleDecision: 'ìœ¤ë¦¬ì  ë”œë ˆë§ˆ í† ë¡  ì°¸ì—¬, ì˜ì‚¬ê²°ì • ê³¼ì • ì²´ê³„í™”, ê²°ê³¼ì— ëŒ€í•œ ì±…ì„ê° ê¸°ë¥´ê¸°ë¥¼ ì‹¤ì²œí•´ë³´ì„¸ìš”.'
                };
                return texts[competencyKey] || 'í•´ë‹¹ ì—­ëŸ‰ í–¥ìƒì„ ìœ„í•œ í™œë™ì— ì°¸ì—¬í•´ë³´ì„¸ìš”.';
            }

            bindEvents() {
                // ìë™ ì €ì¥ (30ì´ˆë§ˆë‹¤)
                setInterval(() => {
                    this.autoSave();
                }, 30000);
            }

            autoSave() {
                HTHT.StorageManager.save('selChecklist', this.checkedItems);
            }

            saveProgress() {
                HTHT.StorageManager.save('selChecklist', this.checkedItems);
                HTHT.Toast.show('ì§„í–‰ìƒí™©ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }

            loadProgress() {
                const savedData = HTHT.StorageManager.load('selChecklist');
                if (savedData) {
                    this.checkedItems = savedData;
                    this.updateCheckboxes();
                    this.updateDashboard();
                    this.updateAnalysis();
                    HTHT.Toast.show('ì €ì¥ëœ ì§„í–‰ìƒí™©ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.', 'success');
                } else {
                    HTHT.Toast.show('ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'info');
                }
            }

            loadFromStorage() {
                const savedData = HTHT.StorageManager.load('selChecklist');
                if (savedData) {
                    this.checkedItems = savedData;
                }
            }

            resetChecklist() {
                if (confirm('ëª¨ë“  ì²´í¬ í•­ëª©ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    this.checkedItems = {};
                    this.updateCheckboxes();
                    this.updateDashboard();
                    this.updateAnalysis();
                    HTHT.Toast.show('ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
                }
            }

            exportReport() {
                const exportData = {
                    title: 'SEL ì—­ëŸ‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¦¬í¬íŠ¸',
                    timestamp: new Date().toISOString(),
                    checkedItems: this.checkedItems,
                    analysis: this.generateAnalysisData()
                };

                // JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°
                HTHT.ExportManager.downloadJSON(exportData, `SELì—­ëŸ‰ë¦¬í¬íŠ¸_${new Date().toISOString().split('T')[0]}`);

                // í…ìŠ¤íŠ¸ ë¦¬í¬íŠ¸ ìƒì„±
                const report = this.generateTextReport();
                HTHT.ExportManager.downloadText(report, `SELì—­ëŸ‰ë¶„ì„_${new Date().toISOString().split('T')[0]}`);

                HTHT.Toast.show('ë¦¬í¬íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            }

            generateAnalysisData() {
                const totalItems = Object.keys(this.competencies).reduce((sum, key) => 
                    sum + this.competencies[key].items.length, 0);
                const completedItems = Object.values(this.checkedItems).filter(Boolean).length;
                
                const competencyScores = {};
                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const checkedCount = competency.items.filter((item, index) => 
                        this.checkedItems[`${key}-${index}`]).length;
                    competencyScores[key] = Math.round((checkedCount / competency.items.length) * 100);
                });

                return {
                    totalItems,
                    completedItems,
                    completionRate: Math.round((completedItems / totalItems) * 100),
                    competencyScores,
                    balanceScore: parseInt(document.getElementById('balanceScore').textContent)
                };
            }

            generateTextReport() {
                const analysis = this.generateAnalysisData();
                
                let report = `
# SEL ì—­ëŸ‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë¦¬í¬íŠ¸

ìƒì„±ì¼ì‹œ: ${new Date().toLocaleString('ko-KR')}

## ì „ì²´ í˜„í™©
- ì´ ì²´í¬ í•­ëª©: ${analysis.totalItems}ê°œ
- ì™„ë£Œëœ í•­ëª©: ${analysis.completedItems}ê°œ
- ì „ì²´ ì™„ì„±ë¥ : ${analysis.completionRate}%
- ê· í˜• ì ìˆ˜: ${analysis.balanceScore}/100

## ì—­ëŸ‰ë³„ ìƒì„¸ ë¶„ì„

`;

                Object.keys(this.competencies).forEach(key => {
                    const competency = this.competencies[key];
                    const score = analysis.competencyScores[key];
                    
                    report += `### ${competency.icon} ${competency.title} (${score}%)\n`;
                    report += `${competency.description}\n\n`;
                    
                    report += '**ì™„ë£Œëœ í•­ëª©:**\n';
                    competency.items.forEach((item, index) => {
                        if (this.checkedItems[`${key}-${index}`]) {
                            report += `- âœ… ${item}\n`;
                        }
                    });
                    
                    report += '\n**ë¯¸ì™„ë£Œ í•­ëª©:**\n';
                    competency.items.forEach((item, index) => {
                        if (!this.checkedItems[`${key}-${index}`]) {
                            report += `- â­• ${item}\n`;
                        }
                    });
                    
                    report += '\n';
                });

                report += `
## ê°œì„  ì œì•ˆ

${this.generateImprovementSuggestions().map(suggestion => `- ${suggestion}`).join('\n')}

---
HTHTÃ—SEL í”„ë¡œì íŠ¸ - SEL ì—­ëŸ‰ ì²´í¬ë¦¬ìŠ¤íŠ¸
                `.trim();

                return report;
            }

            generateImprovementSuggestions() {
                const analysis = this.generateAnalysisData();
                const suggestions = [];

                Object.keys(analysis.competencyScores).forEach(key => {
                    const score = analysis.competencyScores[key];
                    const competency = this.competencies[key];
                    
                    if (score < 50) {
                        suggestions.push(`${competency.title} ì—­ëŸ‰ ê°•í™”ë¥¼ ìœ„í•œ ì§‘ì¤‘ì ì¸ í™œë™ í•„ìš”`);
                    }
                });

                if (analysis.balanceScore < 70) {
                    suggestions.push('ì—­ëŸ‰ ê°„ ê· í˜• ë°œì „ì„ ìœ„í•œ ì¢…í•©ì  ì ‘ê·¼ í•„ìš”');
                }

                if (suggestions.length === 0) {
                    suggestions.push('í˜„ì¬ SEL ì—­ëŸ‰ì´ ê· í˜•ìˆê²Œ ë°œë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì§€ì†ì ì¸ ì„±ì¥ì„ ìœ„í•´ ê¾¸ì¤€í•œ ë…¸ë ¥ì„ ê³„ì†í•´ì£¼ì„¸ìš”.');
                }

                return suggestions;
            }
        }

        // ì „ì—­ í•¨ìˆ˜ë“¤
        function toggleSection(competencyKey) {
            const section = document.querySelector(`#content-${competencyKey}`).closest('.competency-section');
            const content = document.getElementById(`content-${competencyKey}`);
            
            section.classList.toggle('expanded');
            content.classList.toggle('expanded');
        }

        function toggleItem(competencyKey, itemIndex) {
            window.selChecker.toggleItem(competencyKey, itemIndex);
        }

        function resetChecklist() {
            window.selChecker.resetChecklist();
        }

        function saveProgress() {
            window.selChecker.saveProgress();
        }

        function loadProgress() {
            window.selChecker.loadProgress();
        }

        function exportReport() {
            window.selChecker.exportReport();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            window.selChecker = new SELCompetencyChecker();
        });
    </script>
</body>
</html>

